"use strict";$(document).ready((function(){function e(e,t){const n=document.createElement("script");n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}$(".js-search-select").each((function(){$(this).select2({placeholder:"Тип работы",dropdownPosition:"below",minimumResultsForSearch:-1,width:"100%",dropdownParent:$(this).parents(".form-item")})}));new Swiper(".js-feedbacks-slider",{slidesPerView:1,spaceBetween:20,autoHeight:!0,loop:!0,navigation:{prevEl:".swiper-button--prev",nextEl:".swiper-button--next"},breakpoints:{768:{slidesPerView:2,spaceBetween:15,autoHeight:!1}}});$(".js-validator").on("submit",(function(e){$(this).find(".js-input-required").each((function(){const t=$(this).val(),n=$(this).attr("data-validator-type"),s=((e,t,n)=>{let s="";if(validator.isEmpty(t))return s="Необходимо заполнить",s;switch(n){case"email":validator.isEmail(t)||(s="Не похоже на e-mail")}return s})($(this),t,n);var o,i;validator.isEmpty(s)?(e=>{e.removeClass("has-error"),e.next(".validation-error").remove()})($(this)):(e.preventDefault(),o=$(this),i=s,o.addClass("has-error"),o.next(".validation-error").remove(),o.after(`<div class="validation-error">${i}</div>`),setTimeout((function(){o.next(".validation-error").remove()}),5e3))}))})),$(".js-rating-stars").each((function(){const e=$(this).attr("data-rating");if(0===e)return;const t=$(this).find(".js-star");t.each((function(){$(this).index()<=e-1&&$(this).addClass("-filled")}));const n=Math.floor(e),s=(e-n).toFixed(1);s>0&&t.eq(n).addClass("-part-filled").prepend(`<div class="star-filler" style="width: ${100*s}%"></div>`)}));let t=window.pageYOffset;const n=$(".cities");window.addEventListener("scroll",(function(){if(!n.visible(!0))return;const e=(()=>{const e=window.pageYOffset,n=t<e;return t=e,n})();$(".js-cities-line").each((function(){let t;const n=$(this).parent().index()%2!=0;t=e?n?"+":"-":n?"-":"+",$(this).animate({left:t+"=2"},5)}))}),{passive:!0});const s=()=>{$(".mobile-menu").removeClass("opened"),$("#modalBg--mmenu").remove(),$("body").removeClass("modal-opened").css("padding-right",0)};$(".js-open-mmenu").on("click",(function(){$(".mobile-menu").addClass("opened").append('<div class="modal-bg" id="modalBg--mmenu"></div>'),$("body").addClass("modal-opened").css("padding-right",(()=>{let e=document.createElement("div");e.style.cssText="overflow:scroll; position:absolute;",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})()),$("#modalBg--mmenu").on("click",(function(){s()}))})),$(".js-close-mmenu").on("click",(function(){s()})),$(".js-mmenu-dd").on("click",(function(){const e=$(this).parents(".mobile-menu__nav-item");e.toggleClass("opened"),e.find(".mobile-menu__dropdown-box").slideToggle()}));const o=(e,t)=>{if(screen.width>t)return;const n=e.attr("data-max-items"),s=e.attr("data-items-to-show"),o=e.children();if(o.length<=n)return;o.each((function(e){e>=n&&$(this).hide().addClass("hidden")}));e.append('<button class="more-button js-more-btn common-btn common-btn--pink w-shadow"><div class="common-btn__body">Посмотреть ещё</div></button>');const i=e.find(".js-more-btn");i.on("click",(function(){const t=e.children(".hidden");t.length<=s&&i.remove(),t.each((function(e){e<s&&$(this).show().removeClass("hidden")}))}))};$(".js-hide-some").each((function(){o($(this),767)})),$(document).on("click",".js-accordion-toggle",(function(){$(this).hasClass("opened")?($(this).next(".js-accordion-body").slideUp(300).removeClass("opened"),$(this).removeClass("opened")):($(this).next(".js-accordion-body").slideDown(300).addClass("opened"),$(this).addClass("opened"))})),screen.width<768&&($(".subjects__letter").addClass("js-accordion-toggle"),$(".subjects__links-wrapper").addClass("js-accordion-body"));const i=$(".js-tabs-controls"),a=i.children();a.on("click",(function(){const e=$(this).attr("data-tab"),t=i.siblings(".js-tabs");a.removeClass("active"),$(this).addClass("active"),t.children().removeClass("active"),t.children(e).addClass("active")}));const d=document.getElementById("mainMap");async function r(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:n,YMapControls:s}=ymaps3,{YMapZoomControl:o}=await ymaps3.import("@yandex/ymaps3-controls@0.0.1"),{YMapDefaultMarker:i}=await ymaps3.import("@yandex/ymaps3-markers@0.0.1"),a=new e(document.getElementById("mainMap"),{location:{center:[0,0],zoom:16},behaviors:["pinchZoom","drag"]});a.addChild(new t),a.addChild(new n),a.addChild(new s({position:"left"}).addChild(new o)),$.getJSON($("#mainMap").attr("data-json"),(function(e){e.forEach(e=>{const t=`<div><strong>Офис Work5</strong><div>\n                                       <div>${e.address}</div>`;a.addChild(new i({coordinates:e.coords,popup:{content:t,position:"right"}})),"Москва"===e.name&&a.setLocation({center:e.coords})})}))}let c=$(d).visible(!0);const l=()=>{c=$(d).visible(!0),c&&(e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",r),window.removeEventListener("scroll",l))};c?e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",r):window.addEventListener("scroll",l,{passive:!0})}));
//# sourceMappingURL=main.min.js.map
