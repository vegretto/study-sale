"use strict";$(document).ready((function(){function e(e,t){const s=document.createElement("script");s.onload=function(){t()},s.src=e,document.getElementsByTagName("head")[0].appendChild(s)}$(".js-search-select").each((function(){$(this).select2({placeholder:"Тип работы",dropdownPosition:"below",minimumResultsForSearch:-1,width:"100%",dropdownParent:$(this).parents(".form-item")})}));new Swiper(".js-feedbacks-slider",{slidesPerView:1,spaceBetween:20,autoHeight:!0,loop:!0,navigation:{prevEl:".swiper-button--prev",nextEl:".swiper-button--next"},breakpoints:{768:{slidesPerView:2,spaceBetween:15,autoHeight:!1}}});$(".js-validator").on("submit",(function(e){$(this).find(".js-input-required").each((function(){const t=$(this).val(),s=$(this).attr("data-validator-type"),n=((e,t,s)=>{let n="";if(validator.isEmpty(t))return n="Необходимо заполнить",n;switch(s){case"email":validator.isEmail(t)||(n="Не похоже на e-mail")}return n})($(this),t,s);var i,o;validator.isEmpty(n)?(e=>{e.removeClass("has-error"),e.next(".validation-error").remove()})($(this)):(e.preventDefault(),i=$(this),o=n,i.addClass("has-error"),i.next(".validation-error").remove(),i.after(`<div class="validation-error">${o}</div>`),setTimeout((function(){i.next(".validation-error").remove()}),5e3))}))})),$(".js-rating-stars").each((function(){const e=$(this).attr("data-rating");if(0===e)return;const t=$(this).find(".js-star");t.each((function(){$(this).index()<=e-1&&$(this).addClass("-filled")}));const s=Math.floor(e),n=(e-s).toFixed(1);n>0&&t.eq(s).addClass("-part-filled").prepend(`<div class="star-filler" style="width: ${100*n}%"></div>`)}));let t=window.pageYOffset;const s=$(".cities");window.addEventListener("scroll",(function(){if(!s.visible(!0))return;const e=(()=>{const e=window.pageYOffset,s=t<e;return t=e,s})();$(".js-cities-line").each((function(){let t;const s=$(this).parent().index()%2!=0;t=e?s?"+":"-":s?"-":"+",$(this).animate({left:t+"=2"},5)}))}),{passive:!0});const n=()=>{$(".mobile-menu").removeClass("opened"),$("#modalBg--mmenu").remove(),$("body").removeClass("modal-opened").css("padding-right",0)};$(".js-open-mmenu").on("click",(function(){$(".mobile-menu").addClass("opened").append('<div class="modal-bg" id="modalBg--mmenu"></div>'),$("body").addClass("modal-opened").css("padding-right",(()=>{let e=document.createElement("div");e.style.cssText="overflow:scroll; position:absolute;",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})()),$("#modalBg--mmenu").on("click",(function(){n()}))})),$(".js-close-mmenu").on("click",(function(){n()})),$(".js-mmenu-dd").on("click",(function(){const e=$(this).parents(".mobile-menu__nav-item");e.toggleClass("opened"),e.find(".mobile-menu__dropdown-box").slideToggle()}));const i=(e,t)=>{if(screen.width>t)return;const s=e.attr("data-max-items"),n=e.attr("data-items-to-show"),i=e.children();if(i.length<=s)return;i.each((function(e){e>=s&&$(this).hide().addClass("hidden")}));e.append('<button class="more-button js-more-btn common-btn common-btn--pink w-shadow"><div class="common-btn__body">Посмотреть ещё</div></button>');const o=e.find(".js-more-btn");o.on("click",(function(){const t=e.children(".hidden");t.length<=n&&o.remove(),t.each((function(e){e<n&&$(this).show().removeClass("hidden")}))}))};$(".js-hide-some").each((function(){i($(this),767)})),$(document).on("click",".js-accordion-toggle",(function(){$(this).hasClass("opened")?($(this).next(".js-accordion-body").slideUp(300).removeClass("opened"),$(this).removeClass("opened")):($(this).next(".js-accordion-body").slideDown(300).addClass("opened"),$(this).addClass("opened"))})),screen.width<768&&($(".subjects__letter").addClass("js-accordion-toggle"),$(".subjects__links-wrapper").addClass("js-accordion-body"));const o=$(".js-tabs-controls"),a=o.children();a.on("click",(function(){const e=$(this).attr("data-tab"),t=o.siblings(".js-tabs");a.removeClass("active"),$(this).addClass("active"),t.children().removeClass("active"),t.children(e).addClass("active")}));const d=document.getElementById("mainMap");async function c(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:s,YMapControls:n}=ymaps3,{YMapZoomControl:i}=await ymaps3.import("@yandex/ymaps3-controls@0.0.1"),{YMapDefaultMarker:o}=await ymaps3.import("@yandex/ymaps3-markers@0.0.1"),a=new e(document.getElementById("mainMap"),{location:{center:[0,0],zoom:16},behaviors:["pinchZoom","drag"]});a.addChild(new t),a.addChild(new s),a.addChild(new n({position:"left"}).addChild(new i)),$.getJSON($("#mainMap").attr("data-json"),(function(e){e.forEach(e=>{const t=`<div><strong>Офис Work5</strong><div>\n                                       <div>${e.address}</div>`;a.addChild(new o({coordinates:e.coords,popup:{content:t,position:"right"}})),"Москва"===e.name&&a.setLocation({center:e.coords})})}))}let r=$(d).visible(!0);const l=()=>{r=$(d).visible(!0),r&&(e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",c),window.removeEventListener("scroll",l))};r?e("https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU",c):window.addEventListener("scroll",l,{passive:!0}),$(".js-cities-list").length>0&&$.getJSON("./data/contacts.json",(function(e){e.forEach(e=>{const t=`\n                <div class="contacts-cities__item w-shadow">\n                    <div class="contacts-cities__item-body">\n                        <div class="contacts-cities__item-city">\n                            <svg class="icon icon-point">\n                                <use xlink:href="img/svg/sprite.svg#point"></use>\n                            </svg>${e.name}\n                        </div>\n                        <div class="contacts-cities__item-address">${e.address}</div>\n                    </div>\n                </div>`;$(".js-cities-list").append(t)}),console.log(1)})).done((function(){i($(".js-cities-list"),767)}))}));
//# sourceMappingURL=main.min.js.map
