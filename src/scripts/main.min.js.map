{"version":3,"sources":["main.js"],"names":["$","document","ready","loadScript","url","callback","script","createElement","onload","src","getElementsByTagName","appendChild","each","this","select2","placeholder","dropdownPosition","minimumResultsForSearch","width","dropdownParent","parents","Swiper","slidesPerView","spaceBetween","autoHeight","loop","navigation","prevEl","nextEl","breakpoints","768","on","e","find","inputValue","val","inputType","attr","errorMessage","validateInput","input","validator","isEmpty","isEmail","renderError","element","errorText","removeClass","next","remove","removeError","preventDefault","addClass","after","setTimeout","rating","stars","index","rounded","Math","floor","decimal","toFixed","eq","prepend","lastTopOffset","window","pageYOffset","citiesSection","addEventListener","visible","scrollDirection","checkScrollDirection","currentTopOffset","result","scrollSign","isIndexOdd","parent","animate","left","passive","closeMobileMenu","css","append","getScrollBarWidth","el","style","cssText","body","offsetWidth","clientWidth","toggleClass","slideToggle","hideSome","resolution","screen","maxItems","itemsToShow","items","children","length","hide","moreBtnDom","hiddenItems","show","hasClass","slideUp","slideDown","tabControlsWrapper","tabControls","tabId","tabsWrapper","siblings","mainMap","getElementById","async","initYMap","ymaps3","YMap","YMapDefaultSchemeLayer","YMapDefaultFeaturesLayer","YMapControls","YMapZoomControl","import","YMapDefaultMarker","map","location","center","zoom","behaviors","addChild","position","getJSON","data","forEach","city","markerContent","address","coordinates","coords","popup","content","name","setLocation","mapIsVisible","checkMapVisibility","removeEventListener"],"mappings":"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","file":"main.min.js","sourcesContent":["$(document).ready(function () {\r\n    //Подгрузка скриптов\r\n    function loadScript(url, callback) {\r\n\r\n        const script = document.createElement(\"script\");\r\n        script.onload = function () {\r\n            callback();\r\n        };\r\n\r\n        script.src = url;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\r\n    }\r\n\r\n    //Селекты\r\n    const searchSelects = $(\".js-search-select\")\r\n\r\n    searchSelects.each(function () {\r\n        $(this).select2({\r\n            placeholder: 'Тип работы',\r\n            dropdownPosition: 'below',\r\n            minimumResultsForSearch: -1,\r\n            width: '100%',\r\n            dropdownParent: $(this).parents('.form-item')\r\n        })\r\n    })\r\n\r\n    //Слайдеры\r\n\r\n    const feedbacksSlider = new Swiper('.js-feedbacks-slider', {\r\n        slidesPerView: 1,\r\n        spaceBetween: 20,\r\n        autoHeight: true,\r\n        loop: true,\r\n        navigation: {\r\n            prevEl: '.swiper-button--prev',\r\n            nextEl: '.swiper-button--next',\r\n        },\r\n        breakpoints: {\r\n            768: {\r\n                slidesPerView: 2,\r\n                spaceBetween: 15,\r\n                autoHeight: false\r\n            },\r\n        },\r\n    });\r\n\r\n    //Валидация форм\r\n    const validateInput = (input, inputValue, inputType) => {\r\n        let errorMessage = ''\r\n        if (validator.isEmpty(inputValue)) {\r\n            errorMessage = \"Необходимо заполнить\"\r\n            return errorMessage\r\n        }\r\n        switch (inputType) {\r\n            case 'email':\r\n                if (!validator.isEmail(inputValue)) errorMessage = 'Не похоже на e-mail'\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return errorMessage\r\n    }\r\n\r\n    const renderError = (element, errorText) => {\r\n        element.addClass('has-error')\r\n        element.next('.validation-error').remove()\r\n        element.after(`<div class=\"validation-error\">${errorText}</div>`)\r\n        setTimeout(function () {\r\n            element.next('.validation-error').remove()\r\n        }, 5000)\r\n    }\r\n\r\n    const removeError = (element) => {\r\n        element.removeClass('has-error')\r\n        element.next('.validation-error').remove()\r\n    }\r\n\r\n    $('.js-validator').on('submit', function (e) {\r\n        const inputs = $(this).find('.js-input-required')\r\n        inputs.each(function () {\r\n            const inputValue = $(this).val()\r\n            const inputType = $(this).attr('data-validator-type')\r\n            const errorMessage = validateInput($(this), inputValue, inputType)\r\n\r\n            if (!validator.isEmpty(errorMessage)) {\r\n                e.preventDefault()\r\n                renderError($(this), errorMessage)\r\n            } else {\r\n                removeError($(this))\r\n            }\r\n        })\r\n    })\r\n\r\n    //Вывод звездочек рейтинга\r\n    $('.js-rating-stars').each(function () {\r\n        const rating = $(this).attr('data-rating')\r\n        if (rating === 0) return\r\n        const stars = $(this).find('.js-star')\r\n        stars.each(function () {\r\n            if ($(this).index() <= rating-1) $(this).addClass('-filled')\r\n        })\r\n        const rounded = Math.floor(rating)\r\n        const decimal = (rating - rounded).toFixed(1)\r\n        if (decimal > 0) {\r\n            stars.eq(rounded).addClass('-part-filled')\r\n                .prepend(`<div class=\"star-filler\" style=\"width: ${decimal * 100}%\"></div>`)\r\n        }\r\n    })\r\n\r\n    // Полоски с городами\r\n    let lastTopOffset = window.pageYOffset\r\n    const checkScrollDirection = () => {\r\n        const currentTopOffset = window.pageYOffset\r\n        const result = lastTopOffset < currentTopOffset\r\n        lastTopOffset = currentTopOffset\r\n        return result\r\n    }\r\n\r\n    const citiesSection = $('.cities')\r\n    window.addEventListener('scroll',function () {\r\n        if (!citiesSection.visible(true)) return\r\n        const scrollDirection = checkScrollDirection()\r\n        $('.js-cities-line').each(function () {\r\n            let scrollSign\r\n            const isIndexOdd = $(this).parent().index() % 2 !== 0\r\n            if (scrollDirection) scrollSign = isIndexOdd ? '+' : '-'\r\n            else scrollSign = isIndexOdd ? '-' : '+'\r\n            $(this).animate({left: `${scrollSign}=2`}, 5)\r\n        })\r\n    }, {passive: true})\r\n\r\n    //Находит ширину скроллбара\r\n    const getScrollBarWidth = () => {\r\n        let el = document.createElement(\"div\");\r\n        el.style.cssText = \"overflow:scroll; position:absolute;\";\r\n        document.body.appendChild(el);\r\n        let width = el.offsetWidth - el.clientWidth;\r\n        el.remove();\r\n        return width;\r\n    }\r\n\r\n    // Моб. меню\r\n    const closeMobileMenu = () => {\r\n        $('.mobile-menu').removeClass('opened')\r\n        $(`#modalBg--mmenu`).remove()\r\n        $('body').removeClass('modal-opened').css('padding-right', 0)\r\n    }\r\n\r\n    $('.js-open-mmenu').on('click', function () {\r\n        $('.mobile-menu').addClass('opened').append(`<div class=\"modal-bg\" id=\"modalBg--mmenu\"></div>`)\r\n        $('body').addClass('modal-opened').css('padding-right', getScrollBarWidth())\r\n        $('#modalBg--mmenu').on('click', function () {\r\n            closeMobileMenu()\r\n        })\r\n    })\r\n\r\n    $('.js-close-mmenu').on('click', function () {\r\n        closeMobileMenu()\r\n    })\r\n\r\n    $('.js-mmenu-dd').on('click', function () {\r\n        const parent = $(this).parents('.mobile-menu__nav-item')\r\n        parent.toggleClass('opened')\r\n        parent.find('.mobile-menu__dropdown-box').slideToggle()\r\n    })\r\n\r\n    //Добавляет кнопку и функционал \"Показать еще\"\r\n    const hideSome = (element, resolution) => {\r\n        if (screen.width > resolution) return\r\n        const maxItems = element.attr('data-max-items')\r\n        const itemsToShow = element.attr('data-items-to-show')\r\n        const items = element.children()\r\n        const itemsQty = items.length\r\n        if (itemsQty <= maxItems) return\r\n\r\n        items.each(function (index) {\r\n            if (index >= maxItems) $(this).hide().addClass('hidden')\r\n        })\r\n\r\n        const moreBtnMarkup = '<button class=\"more-button js-more-btn common-btn common-btn--pink w-shadow\"><div class=\"common-btn__body\">Посмотреть ещё</div></button>'\r\n        element.append(moreBtnMarkup)\r\n        const moreBtnDom = element.find('.js-more-btn')\r\n        moreBtnDom.on('click', function () {\r\n            const hiddenItems = element.children('.hidden')\r\n            if (hiddenItems.length <= itemsToShow) moreBtnDom.remove()\r\n            hiddenItems.each(function (index) {\r\n                if (index < itemsToShow) $(this).show().removeClass('hidden')\r\n            })\r\n        })\r\n    }\r\n\r\n    $('.js-hide-some').each(function () {\r\n        hideSome($(this), 767)\r\n    })\r\n\r\n    //Аккордион\r\n    $(document).on('click', '.js-accordion-toggle', function () {\r\n        if (!$(this).hasClass('opened')) {\r\n            $(this).next('.js-accordion-body').slideDown(300).addClass('opened')\r\n            $(this).addClass('opened')\r\n        } else {\r\n            $(this).next('.js-accordion-body').slideUp(300).removeClass('opened')\r\n            $(this).removeClass('opened')\r\n        }\r\n    })\r\n\r\n    //Добавляем аккордион к предметам на мобилках\r\n    if (screen.width < 768) {\r\n        $('.subjects__letter').addClass('js-accordion-toggle')\r\n        $('.subjects__links-wrapper').addClass('js-accordion-body')\r\n    }\r\n\r\n    //Переключение табов\r\n    const tabControlsWrapper = $('.js-tabs-controls')\r\n    const tabControls = tabControlsWrapper.children()\r\n\r\n    tabControls.on('click', function () {\r\n        const tabId = $(this).attr('data-tab')\r\n        const tabsWrapper = tabControlsWrapper.siblings('.js-tabs')\r\n        tabControls.removeClass('active')\r\n        $(this).addClass('active')\r\n        tabsWrapper.children().removeClass('active')\r\n        tabsWrapper.children(tabId).addClass('active')\r\n    })\r\n\r\n    //Карта\r\n    const mainMap = document.getElementById('mainMap')\r\n\r\n    async function initYMap() {\r\n        await ymaps3.ready;\r\n        const {\r\n            YMap,\r\n            YMapDefaultSchemeLayer,\r\n            YMapDefaultFeaturesLayer,\r\n            YMapControls,\r\n        } = ymaps3;\r\n\r\n        const {YMapZoomControl} = await ymaps3.import('@yandex/ymaps3-controls@0.0.1');\r\n        const {YMapDefaultMarker} = await ymaps3.import('@yandex/ymaps3-markers@0.0.1');\r\n\r\n        const map = new YMap(document.getElementById('mainMap'), {\r\n            location: {\r\n                center: [0, 0],\r\n                zoom: 16\r\n            },\r\n            behaviors: ['pinchZoom', 'drag']\r\n        });\r\n\r\n        map.addChild(new  YMapDefaultSchemeLayer());\r\n        map.addChild(new YMapDefaultFeaturesLayer());\r\n        map.addChild(new YMapControls({position: 'left'}).addChild(new YMapZoomControl()));\r\n\r\n        $.getJSON($('#mainMap').attr('data-json'), function(data) {\r\n            data.forEach(city => {\r\n                const markerContent = `<div><strong>Офис Work5</strong><div>\r\n                                       <div>${city.address}</div>`\r\n                map.addChild(new YMapDefaultMarker({\r\n                    coordinates: city.coords,\r\n                    popup: {\r\n                        content: markerContent,\r\n                        position: 'right'\r\n                    }\r\n                }));\r\n\r\n                if (city.name === \"Москва\") map.setLocation({center: city.coords});\r\n            })\r\n        });\r\n\r\n        function setCenter(coords) {\r\n            map.setLocation({center: coords, duration: 500});\r\n        }\r\n    }\r\n\r\n\r\n    let mapIsVisible = $(mainMap).visible(true)\r\n\r\n    const checkMapVisibility = () => {\r\n        mapIsVisible = $(mainMap).visible(true)\r\n        if (mapIsVisible) {\r\n            loadScript('https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU',\r\n                initYMap)\r\n            window.removeEventListener('scroll', checkMapVisibility)\r\n        }\r\n    }\r\n\r\n    if (mapIsVisible) {\r\n        loadScript('https://api-maps.yandex.ru/v3/?apikey=b94d7ec3-5178-446e-81c0-18bb45ea93c8&lang=ru_RU',\r\n            initYMap)\r\n    } else {\r\n        window.addEventListener('scroll', checkMapVisibility, {passive: true});\r\n    }\r\n});\r\n\r\n\r\n"]}