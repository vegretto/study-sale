{"version":3,"sources":["main.js"],"names":["$","document","ready","each","this","select2","placeholder","dropdownPosition","minimumResultsForSearch","width","dropdownParent","parents","Swiper","slidesPerView","spaceBetween","autoHeight","loop","navigation","prevEl","nextEl","breakpoints","768","rating","attr","stars","find","index","addClass","rounded","Math","floor","decimal","toFixed","eq","prepend","lastTopOffset","window","pageYOffset","citiesSection","addEventListener","visible","scrollDirection","checkScrollDirection","currentTopOffset","result","scrollSign","isIndexOdd","parent","animate","left","passive","closeMobileMenu","removeClass","remove","css","on","append","getScrollBarWidth","el","createElement","style","cssText","body","appendChild","offsetWidth","clientWidth","toggleClass","slideToggle","hideSome","element","resolution","screen","maxItems","itemsToShow","items","children","length","hide","moreBtnDom","hiddenItems","show","hasClass","next","slideUp","slideDown","tabControlsWrapper","tabControls","tabId","tabsWrapper","siblings"],"mappings":"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","file":"main.min.js","sourcesContent":["$(document).ready(function () {\r\n    //Селекты\r\n    const searchSelects = $(\".js-search-select\")\r\n\r\n    searchSelects.each(function () {\r\n        $(this).select2({\r\n            placeholder: 'Тип работы',\r\n            dropdownPosition: 'below',\r\n            minimumResultsForSearch: -1,\r\n            width: '100%',\r\n            dropdownParent: $(this).parents('.form-item')\r\n        })\r\n    })\r\n\r\n    //Слайдеры\r\n\r\n    const feedbacksSlider = new Swiper('.js-feedbacks-slider', {\r\n        slidesPerView: 1,\r\n        spaceBetween: 20,\r\n        autoHeight: true,\r\n        loop: true,\r\n        navigation: {\r\n            prevEl: '.swiper-button--prev',\r\n            nextEl: '.swiper-button--next',\r\n        },\r\n        breakpoints: {\r\n            768: {\r\n                slidesPerView: 2,\r\n                spaceBetween: 15,\r\n                autoHeight: false\r\n            },\r\n        },\r\n    });\r\n\r\n    //Вывод звездочек рейтинга\r\n    $('.js-rating-stars').each(function () {\r\n        const rating = $(this).attr('data-rating')\r\n        if (rating === 0) return\r\n        const stars = $(this).find('.js-star')\r\n        stars.each(function () {\r\n            if ($(this).index() <= rating-1) $(this).addClass('-filled')\r\n        })\r\n        const rounded = Math.floor(rating)\r\n        const decimal = (rating - rounded).toFixed(1)\r\n        if (decimal > 0) {\r\n            stars.eq(rounded).addClass('-part-filled')\r\n                .prepend(`<div class=\"star-filler\" style=\"width: ${decimal * 100}%\"></div>`)\r\n        }\r\n    })\r\n\r\n    // Полоски с городами\r\n    let lastTopOffset = window.pageYOffset\r\n    const checkScrollDirection = () => {\r\n        const currentTopOffset = window.pageYOffset\r\n        const result = lastTopOffset < currentTopOffset\r\n        lastTopOffset = currentTopOffset\r\n        return result\r\n    }\r\n\r\n    const citiesSection = $('.cities')\r\n    window.addEventListener('scroll',function () {\r\n        if (!citiesSection.visible(true)) return\r\n        const scrollDirection = checkScrollDirection()\r\n        $('.js-cities-line').each(function () {\r\n            let scrollSign\r\n            const isIndexOdd = $(this).parent().index() % 2 !== 0\r\n            if (scrollDirection) scrollSign = isIndexOdd ? '+' : '-'\r\n            else scrollSign = isIndexOdd ? '-' : '+'\r\n            $(this).animate({left: `${scrollSign}=2`}, 5)\r\n        })\r\n    }, {passive: true})\r\n\r\n    //Находит ширину скроллбара\r\n    const getScrollBarWidth = () => {\r\n        let el = document.createElement(\"div\");\r\n        el.style.cssText = \"overflow:scroll; position:absolute;\";\r\n        document.body.appendChild(el);\r\n        let width = el.offsetWidth - el.clientWidth;\r\n        el.remove();\r\n        return width;\r\n    }\r\n\r\n    // Моб. меню\r\n    const closeMobileMenu = () => {\r\n        $('.mobile-menu').removeClass('opened')\r\n        $(`#modalBg--mmenu`).remove()\r\n        $('body').removeClass('modal-opened').css('padding-right', 0)\r\n    }\r\n\r\n    $('.js-open-mmenu').on('click', function () {\r\n        $('.mobile-menu').addClass('opened').append(`<div class=\"modal-bg\" id=\"modalBg--mmenu\"></div>`)\r\n        $('body').addClass('modal-opened').css('padding-right', getScrollBarWidth())\r\n        $('#modalBg--mmenu').on('click', function () {\r\n            closeMobileMenu()\r\n        })\r\n    })\r\n\r\n    $('.js-close-mmenu').on('click', function () {\r\n        closeMobileMenu()\r\n    })\r\n\r\n    $('.js-mmenu-dd').on('click', function () {\r\n        const parent = $(this).parents('.mobile-menu__nav-item')\r\n        parent.toggleClass('opened')\r\n        parent.find('.mobile-menu__dropdown-box').slideToggle()\r\n    })\r\n\r\n    //Добавляет кнопку и функционал \"Показать еще\"\r\n    const hideSome = (element, resolution) => {\r\n        if (screen.width > resolution) return\r\n        const maxItems = element.attr('data-max-items')\r\n        const itemsToShow = element.attr('data-items-to-show')\r\n        const items = element.children()\r\n        const itemsQty = items.length\r\n        if (itemsQty <= maxItems) return\r\n\r\n        items.each(function (index) {\r\n            if (index >= maxItems) $(this).hide().addClass('hidden')\r\n        })\r\n\r\n        const moreBtnMarkup = '<button class=\"more-button js-more-btn common-btn common-btn--pink w-shadow\"><div class=\"common-btn__body\">Посмотреть ещё</div></button>'\r\n        element.append(moreBtnMarkup)\r\n        const moreBtnDom = element.find('.js-more-btn')\r\n        moreBtnDom.on('click', function () {\r\n            const hiddenItems = element.children('.hidden')\r\n            if (hiddenItems.length <= itemsToShow) moreBtnDom.remove()\r\n            hiddenItems.each(function (index) {\r\n                if (index < itemsToShow) $(this).show().removeClass('hidden')\r\n            })\r\n        })\r\n    }\r\n\r\n    $('.js-hide-some').each(function () {\r\n        hideSome($(this), 767)\r\n    })\r\n\r\n    //Аккордион\r\n    $('.js-accordion-toggle').on('click', function () {\r\n        if (!$(this).hasClass('opened')) {\r\n            $(this).next('.js-accordion-body').slideDown(300).addClass('opened')\r\n            $(this).addClass('opened')\r\n        } else {\r\n            $(this).next('.js-accordion-body').slideUp(300).removeClass('opened')\r\n            $(this).removeClass('opened')\r\n        }\r\n    })\r\n\r\n    //Переключение табов\r\n    const tabControlsWrapper = $('.js-tabs-controls')\r\n    const tabControls = tabControlsWrapper.children()\r\n\r\n    tabControls.on('click', function () {\r\n        const tabId = $(this).attr('data-tab')\r\n        const tabsWrapper = tabControlsWrapper.siblings('.js-tabs')\r\n        tabControls.removeClass('active')\r\n        $(this).addClass('active')\r\n        tabsWrapper.children().removeClass('active')\r\n        tabsWrapper.children(tabId).addClass('active')\r\n    })\r\n});\r\n\r\n\r\n"]}